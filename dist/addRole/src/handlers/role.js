(()=>{var e={477:(e,r,s)=>{const t=s(496),{user:o}=s(348),{role:a}=s(228),{auth:i}=s(430),{workspace:n}=s(248),{userWorkspace:l}=s(945),p=s(900),c=new t(process.env.DB_NAME,process.env.DB_USER,process.env.DB_PASSWORD,{dialect:"postgres",dialectModule:p,host:process.env.DB_HSOT,port:process.env.DB_PORT,logging:console.log,query:{raw:!0}}),u={},d=o(c,t),y=a(c,t),m=i(c,t),N=n(c,t),_=l(c,t);N.belongsToMany(d,{through:"User_Workspace",as:"workspaces",foreignKey:"workspace_id"}),d.belongsToMany(N,{through:"User_Workspace",as:"users",foreignKey:"user_id"}),d.hasOne(m,{foreignKey:"user_id"}),m.belongsTo(d,{foreignKey:"user_id"}),y.hasMany(d,{foreignKey:"role_id"}),d.belongsTo(y,{foreignKey:"role_id"});const g={User:d,Role:y,Auth:m,Workspace:N,UserWorkspace:_,sequelize:c};e.exports=async()=>u.isConnected?(console.log("=> Using existing connection."),g):(await c.sync({alter:!0}),await c.authenticate(),u.isConnected=!0,console.log("=> Created a new connection."),g)},439:(e,r,s)=>{const t=s(862),o=s(582),a=s(380),i=s(477);e.exports.addRole=t((async(e,r)=>{try{r.callbackWaitsForEmptyEventLoop=!1;const{Role:s}=await i(),{roleName:t}=e.body,o=await s.create({role_name:t},{raw:!0});return{statusCode:200,body:JSON.stringify({message:"Role created",data:o})}}catch(e){return{statusCode:e.statusCode,body:JSON.stringify({message:e.message})}}})).use(o()).use(a())},430:e=>{e.exports.auth=(e,r)=>e.define("Auth",{auth_id:{type:r.INTEGER,primaryKey:!0,autoIncrement:!0},access_token:{type:r.STRING,allowNull:!1}},{timestamps:!0,freezeTableName:!0})},228:e=>{e.exports.role=(e,r)=>e.define("Role",{role_id:{type:r.INTEGER,primaryKey:!0,autoIncrement:!0},role_name:{type:r.ENUM,values:["Admin","Member"]}},{timestamps:!0,freezeTableName:!0})},348:e=>{e.exports.user=(e,r)=>e.define("User",{user_id:{type:r.INTEGER,primaryKey:!0,autoIncrement:!0},first_name:{type:r.STRING},last_name:{type:r.STRING},email_id:{type:r.STRING,allowNull:!1,unique:!0},profileImageUploaded:{type:r.STRING},isActive:{type:r.BOOLEAN,defaultValue:!0},password:{type:r.STRING},active_workspace_id:{type:r.INTEGER,allowNull:!1}},{timestamps:!0,freezeTableName:!0})},945:e=>{e.exports.userWorkspace=(e,r)=>e.define("User_Workspace",{user_id:{type:r.INTEGER,allowNull:!1},workspace_id:{type:r.INTEGER,allowNull:!1}},{timestamps:!0,freezeTableName:!0})},248:e=>{e.exports.workspace=(e,r)=>e.define("Workspace",{workspace_id:{type:r.INTEGER,primaryKey:!0,autoIncrement:!0},workspace_name:{type:r.STRING,allowNull:!1},email_id:{type:r.STRING,allowNull:!1,unique:!0}},{timestamps:!0,freezeTableName:!0})},862:e=>{"use strict";e.exports=require("@middy/core")},380:e=>{"use strict";e.exports=require("@middy/http-error-handler")},582:e=>{"use strict";e.exports=require("@middy/http-json-body-parser")},900:e=>{"use strict";e.exports=require("pg")},496:e=>{"use strict";e.exports=require("sequelize")}},r={},s=function s(t){var o=r[t];if(void 0!==o)return o.exports;var a=r[t]={exports:{}};return e[t](a,a.exports,s),a.exports}(439);module.exports=s})();